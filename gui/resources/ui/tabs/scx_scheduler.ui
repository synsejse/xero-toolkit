<?xml version="1.0" encoding="UTF-8"?>
<interface>
    <requires lib="gtk" version="4.0"/>
    <requires lib="libadwaita" version="1.0"/>

    <object class="GtkBox" id="page_scx_scheduler">
        <property name="orientation">vertical</property>
        <property name="spacing">0</property>
        <property name="margin-top">48</property>
        <property name="margin-bottom">48</property>
        <property name="margin-start">48</property>
        <property name="margin-end">48</property>
        <property name="hexpand">true</property>
        <property name="vexpand">true</property>
        <property name="halign">fill</property>
        <property name="valign">fill</property>

        <!-- Header Section -->
        <child>
            <object class="GtkBox">
                <property name="orientation">horizontal</property>
                <property name="spacing">16</property>
                <property name="halign">fill</property>
                <property name="valign">start</property>
                <property name="vexpand">false</property>
                <property name="margin-start">12</property>
                <property name="margin-end">12</property>

                <child>
                    <object class="GtkImage">
                        <property name="icon-name">star-symbolic</property>
                        <property name="pixel-size">48</property>
                        <property name="valign">center</property>
                    </object>
                </child>

                <child>
                    <object class="GtkBox">
                        <property name="orientation">vertical</property>
                        <property name="spacing">4</property>
                        <property name="valign">center</property>
                        <property name="hexpand">true</property>

                        <child>
                            <object class="GtkLabel">
                                <property name="label">SCX Scheduler</property>
                                <property name="css-classes">title-2</property>
                                <property name="halign">start</property>
                                <property name="xalign">0</property>
                            </object>
                        </child>

                        <child>
                            <object class="GtkBox">
                                <property name="orientation">horizontal</property>
                                <property name="spacing">12</property>
                                <property name="halign">start</property>

                                <!-- Kernel Status Indicator -->
                                <child>
                                    <object class="GtkBox">
                                        <property name="orientation">horizontal</property>
                                        <property name="spacing">4</property>
                                        <child>
                                            <object class="GtkImage" id="kernel_status_icon">
                                                <property name="icon-name">circle-check</property>
                                                <property name="pixel-size">14</property>
                                            </object>
                                        </child>
                                        <child>
                                            <object class="GtkLabel" id="kernel_version_label">
                                                <property name="label">Checking...</property>
                                                <style>
                                                    <class name="dim-label"/>
                                                    <class name="caption"/>
                                                </style>
                                            </object>
                                        </child>
                                    </object>
                                </child>

                                <child>
                                    <object class="GtkSeparator">
                                        <property name="orientation">vertical</property>
                                    </object>
                                </child>

                                <!-- sched-ext Support Label (hidden element for code reference) -->
                                <child>
                                    <object class="GtkLabel" id="kernel_support_label">
                                        <property name="visible">false</property>
                                        <property name="label">Checking...</property>
                                    </object>
                                </child>

                                <!-- Active Scheduler Indicator -->
                                <child>
                                    <object class="GtkBox">
                                        <property name="orientation">horizontal</property>
                                        <property name="spacing">4</property>
                                        <child>
                                            <object class="GtkImage">
                                                <property name="icon-name">play-symbolic</property>
                                                <property name="pixel-size">14</property>
                                                <style>
                                                    <class name="dim-label"/>
                                                </style>
                                            </object>
                                        </child>
                                        <child>
                                            <object class="GtkLabel" id="active_scheduler_label">
                                                <property name="label">EEVDF (Default)</property>
                                                <style>
                                                    <class name="dim-label"/>
                                                    <class name="caption"/>
                                                </style>
                                            </object>
                                        </child>
                                    </object>
                                </child>

                                <child>
                                    <object class="GtkSeparator">
                                        <property name="orientation">vertical</property>
                                    </object>
                                </child>

                                <!-- Mode Indicator -->
                                <child>
                                    <object class="GtkBox">
                                        <property name="orientation">horizontal</property>
                                        <property name="spacing">4</property>
                                        <child>
                                            <object class="GtkImage">
                                                <property name="icon-name">gear-symbolic</property>
                                                <property name="pixel-size">14</property>
                                                <style>
                                                    <class name="dim-label"/>
                                                </style>
                                            </object>
                                        </child>
                                        <child>
                                            <object class="GtkLabel" id="mode_label">
                                                <property name="label">N/A</property>
                                                <style>
                                                    <class name="dim-label"/>
                                                    <class name="caption"/>
                                                </style>
                                            </object>
                                        </child>
                                    </object>
                                </child>
                            </object>
                        </child>
                    </object>
                </child>

                <child>
                    <object class="GtkButton" id="btn_refresh_schedulers">
                        <property name="icon-name">view-refresh-symbolic</property>
                        <property name="tooltip-text">Refresh schedulers</property>
                        <property name="valign">center</property>
                        <style>
                            <class name="flat"/>
                            <class name="circular"/>
                        </style>
                    </object>
                </child>
            </object>
        </child>

        <!-- Main Content -->
        <child>
            <object class="GtkScrolledWindow">
                <property name="vexpand">true</property>
                <property name="hscrollbar-policy">never</property>
                <child>
                    <object class="AdwClamp">
                        <property name="maximum-size">600</property>
                        <property name="tightening-threshold">400</property>
                        <property name="margin-start">12</property>
                        <property name="margin-end">12</property>
                        <property name="margin-bottom">24</property>
                        <property name="margin-top">32</property>
                        <child>
                            <object class="GtkBox">
                                <property name="orientation">vertical</property>
                                <property name="spacing">24</property>

                                <!-- Scheduler Selection -->
                                <child>
                                    <object class="AdwPreferencesGroup">
                                        <property name="title">Configuration</property>
                                        <child>
                                            <object class="AdwComboRow" id="scheduler_combo">
                                                <property name="title">Scheduler</property>
                                                <property name="subtitle">Select a sched-ext scheduler</property>
                                            </object>
                                        </child>
                                        <child>
                                            <object class="AdwComboRow" id="mode_combo">
                                                <property name="title">Mode</property>
                                                <property name="subtitle">Scheduler operating mode</property>
                                                <property name="model">
                                                    <object class="GtkStringList">
                                                        <items>
                                                            <item>auto</item>
                                                            <item>gaming</item>
                                                            <item>lowlatency</item>
                                                            <item>powersave</item>
                                                        </items>
                                                    </object>
                                                </property>
                                            </object>
                                        </child>
                                        <child>
                                            <object class="AdwSwitchRow" id="persist_switch">
                                                <property name="title">Start on boot</property>
                                                <property name="subtitle">Enable systemd service for persistence</property>
                                            </object>
                                        </child>
                                    </object>
                                </child>

                                <!-- Actions -->
                                <child>
                                    <object class="GtkBox">
                                        <property name="orientation">horizontal</property>
                                        <property name="spacing">12</property>
                                        <property name="halign">center</property>
                                        <property name="homogeneous">true</property>

                                        <child>
                                            <object class="GtkButton" id="btn_switch_scheduler">
                                                <property name="sensitive">false</property>
                                                <property name="hexpand">true</property>
                                                <style>
                                                    <class name="pill"/>
                                                    <class name="suggested-action"/>
                                                </style>
                                                <property name="child">
                                                    <object class="GtkBox">
                                                        <property name="orientation">horizontal</property>
                                                        <property name="spacing">8</property>
                                                        <property name="halign">center</property>
                                                        <property name="margin-start">24</property>
                                                        <property name="margin-end">24</property>
                                                        <property name="margin-top">10</property>
                                                        <property name="margin-bottom">10</property>
                                                        <child>
                                                            <object class="GtkImage">
                                                                <property name="icon-name">media-playback-start-symbolic</property>
                                                                <property name="pixel-size">16</property>
                                                            </object>
                                                        </child>
                                                        <child>
                                                            <object class="GtkLabel">
                                                                <property name="label">Apply</property>
                                                            </object>
                                                        </child>
                                                    </object>
                                                </property>
                                            </object>
                                        </child>

                                        <child>
                                            <object class="GtkButton" id="btn_stop_scheduler">
                                                <property name="sensitive">false</property>
                                                <property name="hexpand">true</property>
                                                <style>
                                                    <class name="pill"/>
                                                    <class name="destructive-action"/>
                                                </style>
                                                <property name="child">
                                                    <object class="GtkBox">
                                                        <property name="orientation">horizontal</property>
                                                        <property name="spacing">8</property>
                                                        <property name="halign">center</property>
                                                        <property name="margin-start">24</property>
                                                        <property name="margin-end">24</property>
                                                        <property name="margin-top">10</property>
                                                        <property name="margin-bottom">10</property>
                                                        <child>
                                                            <object class="GtkImage">
                                                                <property name="icon-name">media-playback-stop-symbolic</property>
                                                                <property name="pixel-size">16</property>
                                                            </object>
                                                        </child>
                                                        <child>
                                                            <object class="GtkLabel">
                                                                <property name="label">Stop</property>
                                                            </object>
                                                        </child>
                                                    </object>
                                                </property>
                                            </object>
                                        </child>
                                    </object>
                                </child>

                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </child>
    </object>
</interface>
