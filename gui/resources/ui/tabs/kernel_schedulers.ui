<?xml version="1.0" encoding="UTF-8"?>
<interface>
    <requires lib="gtk" version="4.0"/>
    <requires lib="libadwaita" version="1.0"/>

    <object class="GtkBox" id="page_kernel_schedulers">
        <property name="orientation">vertical</property>
        <property name="spacing">0</property>
        <property name="margin-top">32</property>
        <property name="margin-bottom">0</property>
        <property name="margin-start">48</property>
        <property name="margin-end">48</property>
        <property name="hexpand">true</property>
        <property name="vexpand">true</property>
        <property name="halign">fill</property>
        <property name="valign">fill</property>

        <!-- Header Section -->
        <child>
            <object class="GtkBox">
                <property name="orientation">horizontal</property>
                <property name="spacing">16</property>
                <property name="halign">start</property>
                <property name="valign">start</property>
                <property name="vexpand">false</property>
                <property name="margin-start">12</property>
                <property name="margin-end">12</property>
                <property name="margin-bottom">16</property>

                <child>
                    <object class="GtkImage">
                        <property name="icon-name">hammer-symbolic</property>
                        <property name="pixel-size">48</property>
                        <property name="valign">center</property>
                    </object>
                </child>

                <child>
                    <object class="GtkBox">
                        <property name="orientation">vertical</property>
                        <property name="spacing">4</property>
                        <property name="valign">center</property>

                        <child>
                            <object class="GtkLabel">
                                <property name="label">Kernel &amp; Schedulers</property>
                                <property name="css-classes">title-2</property>
                                <property name="halign">start</property>
                                <property name="xalign">0</property>
                            </object>
                        </child>

                        <child>
                            <object class="GtkLabel">
                                <property name="label">Manage kernels and CPU schedulers</property>
                                <property name="css-classes">dim-label</property>
                                <property name="halign">start</property>
                                <property name="xalign">0</property>
                                <property name="wrap">true</property>
                            </object>
                        </child>
                    </object>
                </child>
            </object>
        </child>

        <!-- Tab Switcher -->
        <child>
            <object class="GtkBox">
                <property name="orientation">horizontal</property>
                <property name="halign">center</property>
                <property name="margin-top">8</property>
                <property name="margin-bottom">0</property>
                <child>
                    <object class="GtkStackSwitcher">
                        <property name="stack">content_stack</property>
                        <style>
                            <class name="linked"/>
                        </style>
                    </object>
                </child>
            </object>
        </child>

        <!-- Content Stack -->
        <child>
            <object class="GtkStack" id="content_stack">
                <property name="vexpand">true</property>
                <property name="hexpand">true</property>
                <property name="transition-type">crossfade</property>
                <property name="transition-duration">200</property>

                <!-- Kernel Manager Page -->
                <child>
                    <object class="GtkStackPage">
                        <property name="name">kernel_manager</property>
                        <property name="title">Kernel Manager</property>
                        <property name="child">
                            <object class="GtkScrolledWindow">
                                <property name="vexpand">true</property>
                                <property name="hscrollbar-policy">never</property>
                                <child>
                                    <object class="AdwClamp">
                                        <property name="maximum-size">1000</property>
                                        <property name="tightening-threshold">800</property>
                                        <property name="margin-start">12</property>
                                        <property name="margin-end">12</property>
                                        <property name="margin-bottom">24</property>
                                        <property name="margin-top">12</property>
                                        <child>
                                            <object class="GtkBox">
                                                <property name="orientation">vertical</property>
                                                <property name="spacing">12</property>

                                                <!-- Status Section -->
                                                <child>
                                                    <object class="AdwPreferencesGroup">
                                                        <property name="title">Status</property>
                                                        <child>
                                                            <object class="AdwActionRow">
                                                                <property name="title">Installed Kernels</property>
                                                                <property name="subtitle">Kernels currently installed on your system</property>
                                                                <child>
                                                                    <object class="GtkLabel" id="installed_count_label">
                                                                        <property name="label">0 installed</property>
                                                                        <property name="valign">center</property>
                                                                        <style>
                                                                            <class name="dim-label"/>
                                                                        </style>
                                                                    </object>
                                                                </child>
                                                                <child>
                                                                    <object class="GtkButton" id="btn_refresh_kernels">
                                                                        <property name="icon-name">view-refresh-symbolic</property>
                                                                        <property name="tooltip-text">Scan for available and installed kernels</property>
                                                                        <property name="valign">center</property>
                                                                        <style>
                                                                            <class name="flat"/>
                                                                        </style>
                                                                    </object>
                                                                </child>
                                                            </object>
                                                        </child>
                                                        <child>
                                                            <object class="AdwActionRow">
                                                                <property name="title">Available Kernels</property>
                                                                <property name="subtitle">Kernels available for installation</property>
                                                                <child>
                                                                    <object class="GtkLabel" id="available_count_label">
                                                                        <property name="label">0 available</property>
                                                                        <property name="valign">center</property>
                                                                        <style>
                                                                            <class name="dim-label"/>
                                                                        </style>
                                                                    </object>
                                                                </child>
                                                            </object>
                                                        </child>
                                                    </object>
                                                </child>



                                                <!-- Kernel Lists -->
                                                <child>
                                                    <object class="GtkBox" id="content_box">
                                                        <property name="orientation">horizontal</property>
                                                        <property name="spacing">24</property>
                                                        <property name="homogeneous">true</property>
                                                        <property name="vexpand">true</property>
                                                        <property name="valign">fill</property>

                                                        <!-- Installed Kernels -->
                                                        <child>
                                                            <object class="AdwPreferencesGroup">
                                                                <property name="title">Installed Kernels</property>
                                                                <property name="description">Click the trash icon to remove a kernel</property>
                                                                <child>
                                                                    <object class="GtkFrame">
                                                                        <property name="vexpand">true</property>
                                                                        <style>
                                                                            <class name="view"/>
                                                                        </style>
                                                                        <child>
                                                                            <object class="GtkScrolledWindow">
                                                                                <property name="vexpand">true</property>
                                                                                <property name="min-content-height">200</property>
                                                                                <child>
                                                                                    <object class="GtkListBox" id="installed_kernels_list">
                                                                                        <property name="selection-mode">none</property>
                                                                                        <style>
                                                                                            <class name="boxed-list"/>
                                                                                        </style>
                                                                                    </object>
                                                                                </child>
                                                                            </object>
                                                                        </child>
                                                                    </object>
                                                                </child>
                                                            </object>
                                                        </child>

                                                        <!-- Available Kernels -->
                                                        <child>
                                                            <object class="AdwPreferencesGroup">
                                                                <property name="title">Available Kernels</property>
                                                                <property name="description">Click the download icon to install a kernel</property>
                                                                <child>
                                                                    <object class="GtkFrame">
                                                                        <property name="vexpand">true</property>
                                                                        <style>
                                                                            <class name="view"/>
                                                                        </style>
                                                                        <child>
                                                                            <object class="GtkScrolledWindow">
                                                                                <property name="vexpand">true</property>
                                                                                <property name="min-content-height">200</property>
                                                                                <child>
                                                                                    <object class="GtkListBox" id="available_kernels_list">
                                                                                        <property name="selection-mode">none</property>
                                                                                        <style>
                                                                                            <class name="boxed-list"/>
                                                                                        </style>
                                                                                    </object>
                                                                                </child>
                                                                            </object>
                                                                        </child>
                                                                    </object>
                                                                </child>
                                                            </object>
                                                        </child>
                                                    </object>
                                                </child>

                                            </object>
                                        </child>
                                    </object>
                                </child>
                            </object>
                        </property>
                    </object>
                </child>

                <!-- SCX Scheduler Page -->
                <child>
                    <object class="GtkStackPage">
                        <property name="name">scx_scheduler</property>
                        <property name="title">SCX Scheduler</property>
                        <property name="child">
                            <object class="GtkScrolledWindow">
                                <property name="vexpand">true</property>
                                <property name="hscrollbar-policy">never</property>
                                <child>
                                    <object class="AdwClamp">
                                        <property name="maximum-size">1000</property>
                                        <property name="tightening-threshold">800</property>
                                        <property name="margin-start">12</property>
                                        <property name="margin-end">12</property>
                                        <property name="margin-bottom">12</property>
                                        <property name="margin-top">12</property>
                                        <property name="valign">center</property>
                                        <child>
                                            <object class="GtkBox">
                                                <property name="orientation">vertical</property>
                                                <property name="spacing">12</property>

                                                <!-- System Status -->
                                                <child>
                                                    <object class="AdwPreferencesGroup">
                                                        <property name="title">System Status</property>
                                                        <child>
                                                            <object class="AdwActionRow">
                                                                <property name="title">Kernel Support</property>
                                                                <property name="subtitle">Kernel version and compatibility</property>
                                                                <child>
                                                                    <object class="GtkBox">
                                                                        <property name="orientation">horizontal</property>
                                                                        <property name="spacing">12</property>
                                                                        <property name="valign">center</property>
                                                                        <child>
                                                                            <object class="GtkImage" id="kernel_status_icon">
                                                                                <property name="icon-name">dialog-question-symbolic</property>
                                                                                <property name="pixel-size">16</property>
                                                                            </object>
                                                                        </child>
                                                                        <child>
                                                                            <object class="GtkLabel" id="kernel_version_label">
                                                                                <property name="label">Unknown</property>
                                                                            </object>
                                                                        </child>
                                                                        <!-- Hidden label for compatibility -->
                                                                        <child>
                                                                            <object class="GtkLabel" id="kernel_support_label">
                                                                                <property name="visible">false</property>
                                                                            </object>
                                                                        </child>
                                                                    </object>
                                                                </child>
                                                                <child>
                                                                    <object class="GtkButton" id="btn_refresh_schedulers">
                                                                        <property name="icon-name">view-refresh-symbolic</property>
                                                                        <property name="tooltip-text">Refresh Status</property>
                                                                        <property name="valign">center</property>
                                                                        <style>
                                                                            <class name="flat"/>
                                                                        </style>
                                                                    </object>
                                                                </child>
                                                            </object>
                                                        </child>
                                                        <child>
                                                            <object class="AdwActionRow">
                                                                <property name="title">Active Scheduler</property>
                                                                <property name="subtitle">Current scheduler and profile</property>
                                                                <child>
                                                                    <object class="GtkLabel" id="active_scheduler_label">
                                                                        <property name="label">EEVDF (Default)</property>
                                                                        <property name="valign">center</property>
                                                                        <style>
                                                                            <class name="dim-label"/>
                                                                        </style>
                                                                    </object>
                                                                </child>
                                                            </object>
                                                        </child>
                                                    </object>
                                                </child>

                                                <!-- Configuration & Actions -->
                                                <child>
                                                    <object class="AdwPreferencesGroup">
                                                        <property name="title">Configuration</property>
                                                        <child>
                                                            <object class="AdwComboRow" id="scheduler_combo">
                                                                <property name="title">Scheduler</property>
                                                                <property name="subtitle">Select sched-ext scheduler</property>
                                                                <property name="icon-name">gears-symbolic</property>
                                                            </object>
                                                        </child>
                                                        <child>
                                                            <object class="AdwComboRow" id="mode_combo">
                                                                <property name="title">Profile Mode</property>
                                                                <property name="subtitle">Workload optimization target</property>
                                                                <property name="icon-name">gauge-symbolic</property>
                                                                <property name="model">
                                                                    <object class="GtkStringList">
                                                                        <items>
                                                                            <item>auto</item>
                                                                            <item>gaming</item>
                                                                            <item>lowlatency</item>
                                                                            <item>powersave</item>
                                                                        </items>
                                                                    </object>
                                                                </property>
                                                                <property name="selected">0</property>
                                                            </object>
                                                        </child>
                                                        <child>
                                                            <object class="AdwSwitchRow" id="persist_switch">
                                                                <property name="title">Start on Boot</property>
                                                                <property name="subtitle">Automatically start service at login</property>
                                                                <property name="icon-name">asterisk-symbolic</property>
                                                            </object>
                                                        </child>
                                                    </object>
                                                </child>

                                                <!-- Action Buttons -->
                                                <child>
                                                    <object class="GtkBox">
                                                        <property name="orientation">horizontal</property>
                                                        <property name="spacing">12</property>
                                                        <property name="homogeneous">true</property>
                                                        <property name="margin-top">0</property>



                                                        <child>
                                                            <object class="GtkButton" id="btn_stop_scheduler">
                                                                <property name="label">Stop Scheduler</property>
                                                                <property name="tooltip-text">Revert to default kernel scheduler</property>
                                                                <property name="height-request">44</property>
                                                                <style>
                                                                    <class name="destructive-action"/>
                                                                    <class name="pill"/>
                                                                </style>
                                                            </object>
                                                        </child>

                                                        <child>
                                                            <object class="GtkButton" id="btn_switch_scheduler">
                                                                <property name="label">Start/Switch Scheduler</property>
                                                                <property name="tooltip-text">Apply selected scheduler configuration</property>
                                                                <property name="height-request">44</property>
                                                                <style>
                                                                    <class name="suggested-action"/>
                                                                    <class name="pill"/>
                                                                </style>
                                                            </object>
                                                        </child>
                                                    </object>
                                                </child>

                                            </object>
                                        </child>
                                    </object>
                                </child>
                            </object>
                        </property>
                    </object>
                </child>

            </object>
        </child>
    </object>
</interface>
